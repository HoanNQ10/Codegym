<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Memory Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      color: #333;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    h1 {
      margin-top: 20px;
      font-size: 2.5em;
      color: #4c77af;
    }

    #game-container {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      grid-gap: 10px;
      justify-content: center;
      margin: 20px auto;
      max-width: 500px;
      display: none; /* ·∫®n container khi ch∆∞a b·∫Øt ƒë·∫ßu tr√≤ ch∆°i */
    }

    button {
      width: 100px;
      height: 100px;
      font-size: 2em;
      font-weight: bold;
      background-color: #ffffff;
      border: 2px solid #4c77af;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.2s;
    }

    button:hover {
      transform: scale(1.1);
      background-color: #e8f5e9;
    }

    button:disabled {
      background-color: #4c77af;
      color: white;
      cursor: not-allowed;
    }

    .matched {
      background-color: rgb(184, 195, 204);
      color: white;
      border-color: #b8c3cc;
    }

    #start, #replay {
      font-size: 1.5em;
      padding: 10px 20px;
      background-color: #4c77af;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    #start:hover, #replay:hover {
      background-color: #4c77af;
    }

    #replay {
      display: none; /* ·∫®n n√∫t ch∆°i l·∫°i */
    }
  </style>
</head>
<body>
<h1>Memory Game</h1>
<button id="start">Start</button>
<button id="replay">Play Again</button>
<div id="game-container"></div> <!-- Container ch·ª©a c√°c th·∫ª tr√≤ ch∆°i -->

<script>

    const baseCardValues = ["üê∂", "üê±", "üê∞", "ü¶ä", "üêª", "üêº", "üê®", "ü¶Å"];
    let currentLevel = 1; // Level hi·ªán t·∫°i
    let cardValues = []; // Gi√° tr·ªã th·∫ª cho level hi·ªán t·∫°i
    let cards = [];
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let matchedPairs = 0;

    // H√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng th·∫ª theo level
    function updateLevel() {
      const numPairs = currentLevel === 1 ? 2 : currentLevel === 2 ? 4 : 8; // S·ªë c·∫∑p th·∫ª: 2, 4, 8
      cardValues = baseCardValues.slice(0, numPairs); // L·∫•y s·ªë l∆∞·ª£ng th·∫ª ph√π h·ª£p
      cards = cardValues.concat(cardValues); // T·∫°o danh s√°ch th·∫ª
    }

    function updateLevelDisplay() {
      const levelDisplay = document.getElementById("current-level");
      levelDisplay.textContent = `Level: ${currentLevel}`; // C·∫≠p nh·∫≠t n·ªôi dung
    }

    // H√†m kh·ªüi t·∫°o th·∫ª
    function createCards() {
      updateLevel(); // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng th·∫ª
      cards.sort(() => Math.random() - 0.5); // Tr·ªôn th·∫ª
      const gameContainer = document.getElementById("game-container");
      gameContainer.innerHTML = ''; // X√≥a c√°c th·∫ª c≈© n·∫øu c√≥

      cards.forEach((value) => {
        const card = document.createElement("button");
        card.textContent = "?"; // Hi·ªÉn th·ªã d·∫•u h·ªèi
        card.dataset.value = value;
        card.onclick = () => flipCard(card);
        gameContainer.appendChild(card);
      });

      gameContainer.style.display = "grid"; // Hi·ªÉn th·ªã container khi b·∫Øt ƒë·∫ßu tr√≤ ch∆°i
      gameContainer.style.gridTemplateColumns = `repeat(${Math.ceil(Math.sqrt(cards.length))}, 100px)`; // C·∫≠p nh·∫≠t s·ªë c·ªôt
      matchedPairs = 0; // ƒê·∫∑t l·∫°i s·ªë c·∫∑p kh·ªõp khi b·∫Øt ƒë·∫ßu tr√≤ ch∆°i m·ªõi
    }

    // H√†m l·∫≠t th·∫ª
    function flipCard(card) {
      if (lockBoard || card.textContent !== "?") return;
      card.textContent = card.dataset.value;
      if (!firstCard) {
        firstCard = card;
      } else {
        secondCard = card;
        checkMatch();
      }
    }

    // H√†m ki·ªÉm tra th·∫ª tr√πng kh·ªõp
    function checkMatch() {
      lockBoard = true;
      if (firstCard.dataset.value === secondCard.dataset.value) {
        firstCard.classList.add("matched");
        secondCard.classList.add("matched");
        matchedPairs++;
        resetTurn();
        checkWin();
      } else {
        setTimeout(() => {
          firstCard.textContent = "?";
          secondCard.textContent = "?";
          resetTurn();
        }, 500);
      }
    }

    // H√†m ƒë·∫∑t l·∫°i tr·∫°ng th√°i sau khi ki·ªÉm tra
    function resetTurn() {
      firstCard = secondCard = null;
      lockBoard = false;
    }

    // H√†m ki·ªÉm tra xem ng∆∞·ªùi ch∆°i ƒë√£ th·∫Øng hay ch∆∞a
    function checkWin() {
      if (matchedPairs === cardValues.length) {
        setTimeout(() => {
          alert(`Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh Level ${currentLevel}!`);
          currentLevel++; // TƒÉng level
          createCards(); // T·∫°o th·∫ª m·ªõi cho level ti·∫øp theo
        }, 500);
      }
    }

    document.getElementById("start").onclick = function() {
      createCards();
      document.getElementById("start").style.display = "none";
    };

    document.getElementById("replay").onclick = function() {
      currentLevel = 1; // ƒê·∫∑t l·∫°i level
      createCards();
      document.getElementById("replay").style.display = "none"; // ·∫®n n√∫t ch∆°i l·∫°i
    };
</script>

</script>
</body>
</html>
